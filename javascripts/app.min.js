"use strict";var gameBox=document.querySelector("#gameBox"),gift=document.querySelector(".elements .gift"),resetBtn=document.querySelector("#reset"),MaxPoint=2e4,pointBillList=[1e3,800,600,400,200],pointList=[],moveWidth=40,gameTime=60,timeLine=new TimelineMax({delay:.5,onUpdate:updateStats,onRepeat:updateReps,onComplete:restart}),addGift=function e(t){var o=gift.cloneNode();o.dataset.point=t,gameBox.append(o);var n=gameBox.offsetWidth-moveWidth,i=random(moveWidth,n),r=gameBox.offsetHeight+moveWidth,a=random(2,4),s=random(0,gameTime-5);return timeLine.fromTo(o,a,{x:i},{y:"+=500",ease:Power0.easeNone,onComplete:function e(){o.remove()}},s),o},setBill=function e(t,o){var n=[],i=0;do{i=t[randomRound(0,t.length-1)]||0,i>t[0]&&(t.shift(),console.log("shift: "+t)),i<=o&&(o-=i,n.push(i))}while(o>0);return n},start=function e(){timeLine.clear(),pointList=shuffle(setBill(pointBillList,MaxPoint)),console.log(pointList.reduce(reducer)),console.log(pointList),pointList.forEach(function(e,t){addGift(e)})},updateStats=function e(){console.log("updateStats")},updateReps=function e(){console.log("updateReps")},restart=function e(){console.log("restart")},onComplete=function e(t){console.log("onComplete"),console.log(t)},randomRound=function e(t,o){return Math.round(Math.random()*(o-t)+t)},random=function e(t,o){return Math.random()*(o-t)+t},shuffle=function e(t){for(var o=t.length-1;o>0;o--){var n=Math.floor(Math.random()*(o+1)),i=[t[n],t[o]];t[o]=i[0],t[n]=i[1]}return t},reducer=function e(t,o){return t+o};start(),resetBtn.addEventListener("click",function(){for(console.log("click to reset");gameBox.firstChild;)gameBox.removeChild(gameBox.firstChild);start()});