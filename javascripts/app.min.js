"use strict";!function(e){var n=function e(){console.log("timeLineOnStart"),l.disabled=!0,c.disabled=!1,s.disabled=!1},t=function e(){console.log("timeLineOnComplete"),l.disabled=!1,c.disabled=!0,s.disabled=!0},o=function e(n){console.log("onComplete"),console.log(n)},i=document.querySelector("#gameBox"),r=document.querySelector("#orientation"),a=document.querySelector(".elements .gift"),d=document.querySelector("#gameBox .catcher"),l=document.querySelector("#startBtn"),c=document.querySelector("#pauseBtn"),s=document.querySelector("#resetBtn"),u=2e4,f=[1e3,800,600,400,200],m=[],h=40,v=60,g="stop",p=new TimelineMax({delay:.5,onStart:n,onComplete:t}),b=function e(n){var t=a.cloneNode();t.dataset.point=n,i.append(t);var o=i.offsetWidth-40,r=C(40,o),d=i.offsetHeight+40,l=C(2,4),c=C(0,55);return p.fromTo(t,l,{x:r},{y:"+="+o,ease:Power0.easeNone,onComplete:function e(){t.remove()}},c),t},y=function e(n,t){var o=[],i=0;do{i=n[q(0,n.length-1)]||0,i>n[0]&&(n.shift(),console.log("shift: "+n)),i<=t&&(t-=i,o.push(i))}while(t>0);return o},M=function e(n){var t=n.alpha,o=n.beta,i=n.gamma,a={alpha:Math.round(t),beta:Math.round(o),gamma:Math.round(i)};r.innerHTML=JSON.stringify(a),console.log(a)},L=function n(){e.DeviceOrientationEvent?(console.log("in move"),r.innerHTML="in Move",e.addEventListener("deviceorientation",M,!1)):(console.log("not support orientation"),r.innerHTML="not support orientation")},S=function e(){p.clear(),m=T(y(f,2e4)),m.forEach(function(e,n){b(e)}),p.play(0)},E=function e(n){for(;i.firstChild;)i.removeChild(i.firstChild);"function"==typeof n&&n()},q=function e(n,t){return Math.round(Math.random()*(t-n)+n)},C=function e(n,t){return Math.random()*(t-n)+n},T=function e(n){for(var t=n.length-1;t>0;t--){var o=Math.floor(Math.random()*(t+1)),i=[n[o],n[t]];n[t]=i[0],n[o]=i[1]}return n},k=function e(n,t){return n+t},w=function e(){p._time>=p.endTime()||0===p._time?(console.log(p._time,p.endTime()),console.log("click to start"),E(S)):p.play(),l.disabled=!0,c.disabled=!1,s.disabled=!1},B=function e(){p.paused(!0),l.disabled=!1,c.disabled=!0},x=function e(){console.log("click to reset"),E(S),l.disabled=!0,c.disabled=!1};l.addEventListener("click",w),l.addEventListener("touchend",w),c.addEventListener("click",B),c.addEventListener("touchend",B),s.addEventListener("click",x),s.addEventListener("touchend",x),L()}(window);